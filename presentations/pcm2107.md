[INCLUDE=presentation]
Title         : Pentaho Standardised Git Repo Setup
Sub Title     : For Big Agile Teams
Author        : Diethard Steiner
Affiliation   : Bissol Consulting Ltd
Email         : diethard.steiner@bissolconsulting.com
Reveal Theme  : night
Beamer Theme  : singapore

[TITLE]

# Content

[TOC]

# Pentaho Standardised Git Repo Setup Presentation

# Challenges

# Artefacts

## PDI Artefacts


| Name                        | Storage Type |
|-----------------------------|:------------:|
| `.kettle/kettle.properties` | all          |
| `.kettle/repositories.xml`  | repo         |
| `.kettle/shared.xml`        | file-based   |
| `.kettle/metastore`         | all          |
| `<pdi-repo>/<name>.kdb`     | repo         |
| `<name>.kjb`                | all          |
| `<name>.ktr`                | all          |


## Pentaho Server Artefacts

| Name               | File Extension | Store as is? |
|--------------------|:--------------:|:------------:|
| Mondrian Schema    | xml            | yes          |
| Metadata Model     | xml            | yes          |
| Analyzer Report    | xml?           | yes          |
| Interactive Report | zip            | NO?          |
| CDE                | html, js, css, etc | yes      |
| DB Connection      | json?          | yes          |


# Auto-Setup

The project includes an `initialse-repo.sh` which sets up the standardised **Git repo**.

##  Structure: Standalone Project (1)

- Create a standalone project with a PDI file repo - no shared artefacts:


```
./initialise-repo.sh -a 2 -p mysampleproj -e dev -s file-repo
```

## Structure: Standalone Project (2)

```
.
├── mysampleproj-code
│   ├── etl
│   │   ├── db_connection_template.kdb  <-- DB CONNECTION
│   │   └── modules                     <-- COMMON ETL PATTERNS
│   │       ├── continuous_delivery
│   │       └── master_wrapper
│   ├── .git
│   │   └── hooks
│   │       └── pre-commit              <-- COMMIT CHECKS 
│   ├── .gitmodules
│   ├── mdx
│   ├── mondrian-schemas
│   ├── pentaho-solutions
│   ├── README.md
│   └── sql
```

## Structure: Standalone Project (3)

```
├── mysampleproj-config-dev
│   ├── .git
│   │   └── hooks
│   │       └── pre-commit
│   ├── .kettle                                <-- KETTLE CONFIG
│   │   ├── kettle.properties
│   │   └── repositories.xml
│   ├── properties                             <-- PROJECT AND JOB CONFIG
│   │   ├── jb_mysampleproj_master.properties
│   │   └── mysampleproj.properties
│   ├── README.md
│   └── shell-scripts                          <-- STANDARDISED EXECUTION SCRIPTS
│       ├── run_jb_mysampleproj_master.sh
│       ├── set-env-variables.sh
│       └── wrapper.sh
└── mysampleproj-documentation
    └── README.md
```

## Repository

- Preconfigured access to file based **PDI repository**: After initialisation Developer can access the repo straight away from **Spoon**.
- The PDI repo is **preloaded** with centrally maintained **Modules**, to ensure **common design patterns** are followed.

![](./pics/modules-shown-in-repo-browser.png)

- Just `source` the `set-env-variables.sh` file before starting **PDI Spoon**.

## Git Hooks

- Straight from the first commit checks will be run:

![](./pics/pre-commit-filename-validation.png)


